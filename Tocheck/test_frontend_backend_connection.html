<!DOCTYPE html>
<html>
<head>
    <title>Test Frontend-Backend Connection</title>
</head>
<body>
    <h1>Testing Backend Connection</h1>
    <div id="results"></div>
    
    <script>
        async function testConnection() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>Testing connection...</p>';
            
            try {
                // Test 1: Basic health check
                console.log('Testing /health endpoint...');
                const healthResponse = await fetch('http://localhost:8000/health');
                const healthData = await healthResponse.json();
                results.innerHTML += `<p>‚úÖ Health check: ${healthData.status}</p>`;
                
                // Test 2: RAG status check
                console.log('Testing /api/rag/status endpoint...');
                const ragResponse = await fetch('http://localhost:8000/api/rag/status');
                const ragData = await ragResponse.json();
                results.innerHTML += `<p>‚úÖ RAG status: ${ragData.status}</p>`;
                
                // Test 3: Processing logs
                console.log('Testing /api/processing-logs endpoint...');
                const logsResponse = await fetch('http://localhost:8000/api/processing-logs');
                const logsData = await logsResponse.json();
                results.innerHTML += `<p>‚úÖ Processing logs: ${logsData.total} entries</p>`;
                
                results.innerHTML += '<p><strong>üéâ All connections working!</strong></p>';
                
            } catch (error) {
                console.error('Connection error:', error);
                results.innerHTML += `<p>‚ùå Error: ${error.message}</p>`;
                
                // Check if it's a CORS issue
                if (error.message.includes('CORS') || error.message.includes('fetch')) {
                    results.innerHTML += '<p>üí° This might be a CORS issue. The backend is running but the browser is blocking the request.</p>';
                }
            }
        }
        
        // Test immediately
        testConnection();
        
        // Test every 5 seconds
        setInterval(testConnection, 5000);
    </script>
</body>
</html>