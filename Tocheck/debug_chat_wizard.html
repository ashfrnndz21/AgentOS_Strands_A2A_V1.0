<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Chat Wizard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #1f2937;
            color: white;
        }
        .debug-panel {
            background-color: #374151;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .error {
            color: #ef4444;
            font-weight: bold;
        }
        .success {
            color: #10b981;
            font-weight: bold;
        }
        .warning {
            color: #f59e0b;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>🔍 Chat Wizard Debug Guide</h1>
    
    <div class="debug-panel">
        <h2>❌ Common Issues & Solutions</h2>
        
        <h3>1. Button Disabled - Missing Required Fields</h3>
        <p><strong>Issue:</strong> "Create Chat Interface" button is grayed out</p>
        <p><strong>Cause:</strong> Required fields are missing based on chat type</p>
        
        <h4>Required Fields by Chat Type:</h4>
        <ul>
            <li><strong>🤖 Direct LLM Chat:</strong>
                <ul>
                    <li>✅ Chat Name (you have: "test")</li>
                    <li><span class="error">❌ Ollama Model (REQUIRED - you need to select this!)</span></li>
                </ul>
            </li>
            <li><strong>👤 Independent Agent:</strong>
                <ul>
                    <li>✅ Agent Name</li>
                    <li>❌ Ollama Model (REQUIRED)</li>
                </ul>
            </li>
            <li><strong>🔗 Palette Agent:</strong>
                <ul>
                    <li>✅ Chat Name</li>
                    <li>❌ Select Agent (REQUIRED)</li>
                </ul>
            </li>
        </ul>
    </div>
    
    <div class="debug-panel">
        <h2>🎯 How to Fix Your Current Issue</h2>
        
        <p>Based on your screenshot, you selected <strong>"Direct LLM Chat"</strong> and named it <strong>"test"</strong>.</p>
        
        <h3>Missing Step:</h3>
        <ol>
            <li>Go back to <strong>Step 2</strong> (click "Back" button)</li>
            <li>In the <strong>"Ollama Model"</strong> dropdown, select a model like:
                <ul>
                    <li>llama3.2:latest</li>
                    <li>llama3.1:latest</li>
                    <li>mistral:latest</li>
                    <li>Or any other model you have installed</li>
                </ul>
            </li>
            <li>Go to Step 3 again</li>
            <li>The <strong>"Create Chat Interface"</strong> button should now be enabled</li>
        </ol>
    </div>
    
    <div class="debug-panel">
        <h2>🔧 Debug Steps</h2>
        
        <h3>1. Check Browser Console</h3>
        <p>Open Developer Tools (F12) and look for:</p>
        <ul>
            <li><span class="success">🎯 Creating chat interface with config:</span> - Shows your configuration</li>
            <li><span class="success">🚀 Final config:</span> - Shows the processed configuration</li>
            <li><span class="error">❌ Error creating chat interface:</span> - Shows any errors</li>
        </ul>
        
        <h3>2. Hover Over Button</h3>
        <p>Hover over the "Create Chat Interface" button to see a tooltip showing:</p>
        <ul>
            <li>Type: direct-llm (or whatever you selected)</li>
            <li>Name: test (or whatever you entered)</li>
        </ul>
        
        <h3>3. Check Required Fields</h3>
        <p>Make sure you have:</p>
        <ul>
            <li>✅ Selected a chat type in Step 1</li>
            <li>✅ Entered a name in Step 2</li>
            <li>❌ <strong>Selected a model/agent in Step 2 (THIS IS LIKELY MISSING!)</strong></li>
        </ul>
    </div>
    
    <div class="debug-panel">
        <h2>✅ Expected Behavior After Fix</h2>
        
        <p>Once you select the required model in Step 2:</p>
        <ol>
            <li>Button becomes enabled (green, not grayed out)</li>
            <li>Click "Create Chat Interface"</li>
            <li>Wizard closes</li>
            <li>Chat interface node appears on your workflow canvas</li>
            <li>Console shows success messages</li>
        </ol>
    </div>
    
    <div class="debug-panel">
        <h2>🚨 If Still Not Working</h2>
        
        <p>If the button is still disabled after selecting a model:</p>
        <ol>
            <li>Check browser console for errors</li>
            <li>Try refreshing the page</li>
            <li>Try a different chat type (Independent Agent or Palette Agent)</li>
            <li>Make sure Ollama is running and models are loaded</li>
        </ol>
    </div>
</body>
</html>