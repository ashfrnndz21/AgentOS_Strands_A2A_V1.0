<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat-Driven Multi-Agent System Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e293b, #3730a3);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }
        .chat-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            height: 80vh;
        }
        .agent-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 80vh;
            overflow-y: auto;
        }
        .chat-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        .message {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 8px;
            max-width: 80%;
        }
        .user-message {
            background: #3b82f6;
            margin-left: auto;
            text-align: right;
        }
        .agent-message {
            background: rgba(16, 185, 129, 0.3);
            border-left: 4px solid #10b981;
        }
        .system-message {
            background: rgba(245, 158, 11, 0.3);
            border-left: 4px solid #f59e0b;
            font-style: italic;
        }
        .escalation-message {
            background: rgba(239, 68, 68, 0.3);
            border-left: 4px solid #ef4444;
        }
        .message-header {
            font-weight: bold;
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        .message-content {
            font-size: 14px;
            line-height: 1.4;
        }
        .chat-input {
            display: flex;
            gap: 10px;
        }
        .input-field {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 14px;
        }
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        .send-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        .send-btn:hover {
            background: #059669;
        }
        .send-btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
        }
        .agent-status {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .agent-status.active {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }
        .agent-status.idle {
            background: rgba(107, 114, 128, 0.2);
            border-color: #6b7280;
        }
        .agent-status.processing {
            background: rgba(245, 158, 11, 0.2);
            border-color: #f59e0b;
        }
        .agent-name {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }
        .agent-activity {
            font-size: 12px;
            opacity: 0.8;
        }
        .workflow-pattern {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .pattern-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #3b82f6;
        }
        .pattern-description {
            font-size: 12px;
            opacity: 0.8;
        }
        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        .quick-btn {
            background: rgba(59, 130, 246, 0.3);
            border: 1px solid #3b82f6;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        .quick-btn:hover {
            background: rgba(59, 130, 246, 0.5);
        }
        .typing-indicator {
            display: none;
            padding: 10px;
            font-style: italic;
            opacity: 0.7;
            font-size: 12px;
        }
        .typing-indicator.show {
            display: block;
        }
        .collaboration-viz {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
        }
        .agent-node {
            display: inline-block;
            background: rgba(16, 185, 129, 0.3);
            border: 2px solid #10b981;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            line-height: 36px;
            margin: 5px;
            font-size: 10px;
            font-weight: bold;
        }
        .agent-node.active {
            background: rgba(245, 158, 11, 0.3);
            border-color: #f59e0b;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .connection-line {
            display: inline-block;
            width: 20px;
            height: 2px;
            background: #64748b;
            margin: 0 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="chat-container">
            <div class="chat-header">
                <h2>ü§ñ Multi-Agent Chat Interface</h2>
                <p>Interact with collaborative AI agents through natural conversation</p>
            </div>
            
            <div class="quick-actions">
                <button class="quick-btn" onclick="sendQuickMessage('hardware')">üîß Hardware Issue</button>
                <button class="quick-btn" onclick="sendQuickMessage('software')">üíª Software Problem</button>
                <button class="quick-btn" onclick="sendQuickMessage('research')">üìö Research Task</button>
                <button class="quick-btn" onclick="sendQuickMessage('analysis')">üìä Data Analysis</button>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message system-message">
                    <div class="message-header">System</div>
                    <div class="message-content">Welcome! I'm your multi-agent assistant. Ask me anything and I'll coordinate with my specialist agents to help you.</div>
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                ü§ñ Agents are collaborating on your request...
            </div>
            
            <div class="chat-input">
                <input 
                    type="text" 
                    class="input-field" 
                    id="messageInput" 
                    placeholder="Ask me anything... I'll coordinate with my specialist agents to help you"
                    onkeypress="handleKeyPress(event)"
                >
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">Send</button>
            </div>
        </div>
        
        <div class="agent-panel">
            <h3>üéØ Agent Collaboration</h3>
            
            <div class="collaboration-viz">
                <div class="pattern-title">Current Pattern: Sequential</div>
                <div style="margin: 15px 0;">
                    <span class="agent-node" id="agent1">T</span>
                    <span class="connection-line"></span>
                    <span class="agent-node" id="agent2">S</span>
                    <span class="connection-line"></span>
                    <span class="agent-node" id="agent3">H</span>
                </div>
                <div style="font-size: 10px; opacity: 0.7;">Triage ‚Üí Specialist ‚Üí Human</div>
            </div>
            
            <div class="workflow-pattern">
                <div class="pattern-title">üìã Active Agents</div>
                
                <div class="agent-status idle" id="triageStatus">
                    <div class="agent-name">üîç Triage Agent</div>
                    <div class="agent-activity">Ready to analyze requests</div>
                </div>
                
                <div class="agent-status idle" id="hardwareStatus">
                    <div class="agent-name">üîß Hardware Specialist</div>
                    <div class="agent-activity">Standby for hardware issues</div>
                </div>
                
                <div class="agent-status idle" id="softwareStatus">
                    <div class="agent-name">üíª Software Specialist</div>
                    <div class="agent-activity">Standby for software issues</div>
                </div>
                
                <div class="agent-status idle" id="researchStatus">
                    <div class="agent-name">üìö Research Agent</div>
                    <div class="agent-activity">Ready for research tasks</div>
                </div>
                
                <div class="agent-status idle" id="humanStatus">
                    <div class="agent-name">üë§ Human Expert</div>
                    <div class="agent-activity">Available for escalation</div>
                </div>
            </div>
            
            <div class="workflow-pattern">
                <div class="pattern-title">üîÑ Interaction Patterns</div>
                <div class="pattern-description">
                    <strong>Sequential:</strong> Agents work in order<br>
                    <strong>Parallel:</strong> Multiple agents simultaneously<br>
                    <strong>Collaborative:</strong> Agents share information<br>
                    <strong>Competitive:</strong> Best solution wins
                </div>
            </div>
            
            <div class="workflow-pattern">
                <div class="pattern-title">üìä Session Stats</div>
                <div class="pattern-description">
                    Messages: <span id="messageCount">0</span><br>
                    Agents Used: <span id="agentsUsed">0</span><br>
                    Escalations: <span id="escalationCount">0</span><br>
                    Avg Response: <span id="avgResponse">0s</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messageCount = 0;
        let agentsUsed = new Set();
        let escalationCount = 0;
        let responseTimes = [];
        
        const quickMessages = {
            hardware: "My laptop won't turn on and I have an important presentation tomorrow",
            software: "My email application keeps crashing when I try to send attachments",
            research: "I need to research the latest trends in artificial intelligence for my report",
            analysis: "Can you help me analyze this sales data to identify patterns and opportunities?"
        };
        
        const agents = {
            triage: {
                name: "Triage Agent",
                responses: {
                    hardware: "I've identified this as a HARDWARE_ISSUE with HIGH priority due to the urgent presentation. Routing to our Hardware Specialist for immediate assistance.",
                    software: "This appears to be a SOFTWARE_ISSUE with MEDIUM priority. The email crash pattern suggests a specific application problem. Connecting you with our Software Specialist.",
                    research: "I've categorized this as a RESEARCH_TASK requiring comprehensive information gathering. Our Research Agent will coordinate multiple sources for your AI trends report.",
                    analysis: "This is a DATA_ANALYSIS request requiring statistical expertise. Our Analysis Agent will examine your sales data for patterns and actionable insights."
                }
            },
            hardware: {
                name: "Hardware Specialist",
                responses: {
                    hardware: "I understand the urgency of your presentation tomorrow. Let's diagnose your laptop systematically:\\n\\n1. **Power Check**: Verify the power adapter is connected and LED indicator is on\\n2. **Battery Test**: Remove battery, hold power button for 30 seconds, reconnect\\n3. **Display Test**: Connect external monitor to check if it's a screen issue\\n4. **Memory Check**: Reseat RAM modules if comfortable doing so\\n\\nIf these steps don't work, I'm escalating to our Human Expert for emergency hardware support."
                }
            },
            software: {
                name: "Software Specialist", 
                responses: {
                    software: "Email attachment crashes are typically caused by file size limits or corrupted cache. Here's my systematic approach:\\n\\n1. **Update Email Client**: Ensure you have the latest version\\n2. **Clear Cache**: Delete temporary files and reset email cache\\n3. **Safe Mode Test**: Try sending attachments in safe mode\\n4. **File Size Check**: Verify attachments are under size limits\\n5. **Alternative Method**: Use web-based email as backup\\n\\nThese steps should resolve 90% of attachment issues. Let me know if you need further assistance!"
                }
            },
            research: {
                name: "Research Agent",
                responses: {
                    research: "I'll conduct comprehensive AI trends research for your report. Here's my multi-source approach:\\n\\n**Current Focus Areas:**\\n‚Ä¢ Generative AI and Large Language Models\\n‚Ä¢ AI Ethics and Responsible Development\\n‚Ä¢ Edge AI and Mobile Integration\\n‚Ä¢ AI in Healthcare and Finance\\n‚Ä¢ Quantum-AI Convergence\\n\\n**Sources I'm Analyzing:**\\n‚Ä¢ Academic papers from arXiv and IEEE\\n‚Ä¢ Industry reports from McKinsey, Gartner\\n‚Ä¢ Tech company announcements and patents\\n‚Ä¢ Government AI policy documents\\n\\nI'll synthesize findings into key trends, implications, and future predictions for your report."
                }
            },
            analysis: {
                name: "Analysis Agent",
                responses: {
                    analysis: "I'll perform comprehensive sales data analysis to uncover patterns and opportunities. My analytical framework:\\n\\n**Pattern Recognition:**\\n‚Ä¢ Seasonal trends and cyclical patterns\\n‚Ä¢ Customer segmentation analysis\\n‚Ä¢ Product performance correlations\\n‚Ä¢ Geographic and demographic insights\\n\\n**Opportunity Identification:**\\n‚Ä¢ Underperforming segments with potential\\n‚Ä¢ Cross-selling and upselling opportunities\\n‚Ä¢ Market expansion possibilities\\n‚Ä¢ Pricing optimization areas\\n\\n**Deliverables:**\\n‚Ä¢ Executive dashboard with key metrics\\n‚Ä¢ Detailed findings report\\n‚Ä¢ Actionable recommendations\\n‚Ä¢ Predictive forecasting models\\n\\nPlease share your data format and specific questions for targeted analysis."
                }
            }
        };
        
        function sendQuickMessage(type) {
            const message = quickMessages[type];
            document.getElementById('messageInput').value = message;
            sendMessage();
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Disable input during processing
            input.disabled = true;
            document.getElementById('sendBtn').disabled = true;
            
            // Add user message
            addMessage('user', 'You', message);
            input.value = '';
            messageCount++;
            
            // Show typing indicator
            document.getElementById('typingIndicator').classList.add('show');
            
            // Determine message type and execute workflow
            const messageType = determineMessageType(message);
            await executeWorkflow(messageType, message);
            
            // Hide typing indicator
            document.getElementById('typingIndicator').classList.remove('show');
            
            // Re-enable input
            input.disabled = false;
            document.getElementById('sendBtn').disabled = false;
            input.focus();
            
            updateStats();
        }
        
        function determineMessageType(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('laptop') || lowerMessage.includes('computer') || lowerMessage.includes('hardware') || lowerMessage.includes('turn on')) {
                return 'hardware';
            } else if (lowerMessage.includes('email') || lowerMessage.includes('application') || lowerMessage.includes('software') || lowerMessage.includes('crash')) {
                return 'software';
            } else if (lowerMessage.includes('research') || lowerMessage.includes('trends') || lowerMessage.includes('report') || lowerMessage.includes('information')) {
                return 'research';
            } else if (lowerMessage.includes('analysis') || lowerMessage.includes('data') || lowerMessage.includes('sales') || lowerMessage.includes('patterns')) {
                return 'analysis';
            }
            
            return 'general';
        }
        
        async function executeWorkflow(type, message) {
            const startTime = Date.now();
            
            // Step 1: Triage Agent
            await simulateAgentWork('triage', 1500);
            addMessage('agent', 'Triage Agent', agents.triage.responses[type] || "I'm analyzing your request and routing it to the appropriate specialist...");
            agentsUsed.add('triage');
            
            // Step 2: Specialist Agent
            if (type === 'hardware') {
                await simulateAgentWork('hardware', 2500);
                addMessage('agent', 'Hardware Specialist', agents.hardware.responses[type]);
                agentsUsed.add('hardware');
                
                // Check for escalation (simulate based on complexity)
                if (message.toLowerCase().includes('tomorrow') || message.toLowerCase().includes('urgent')) {
                    await simulateAgentWork('human', 1000);
                    addMessage('escalation', 'Human Expert', "I've been notified of your urgent hardware issue. I'm arranging for emergency technical support to contact you within the next hour. In the meantime, try the Hardware Specialist's suggestions. If you have a backup device, please use that for your presentation preparation.");
                    escalationCount++;
                    agentsUsed.add('human');
                }
            } else if (type === 'software') {
                await simulateAgentWork('software', 2000);
                addMessage('agent', 'Software Specialist', agents.software.responses[type]);
                agentsUsed.add('software');
            } else if (type === 'research') {
                await simulateAgentWork('research', 3000);
                addMessage('agent', 'Research Agent', agents.research.responses[type]);
                agentsUsed.add('research');
            } else if (type === 'analysis') {
                await simulateAgentWork('analysis', 2500);
                addMessage('agent', 'Analysis Agent', agents.analysis.responses[type]);
                agentsUsed.add('analysis');
            } else {
                await simulateAgentWork('triage', 1500);
                addMessage('agent', 'General Assistant', "I can help you with various tasks including technical support, research, and data analysis. Could you provide more specific details about what you need assistance with?");
            }
            
            const endTime = Date.now();
            responseTimes.push((endTime - startTime) / 1000);
        }
        
        async function simulateAgentWork(agentType, duration) {
            // Update agent status to processing
            const statusElement = document.getElementById(agentType + 'Status');
            if (statusElement) {
                statusElement.className = 'agent-status processing';
                statusElement.querySelector('.agent-activity').textContent = 'Processing your request...';
            }
            
            // Update visualization
            updateVisualization(agentType);
            
            // Simulate processing time
            await new Promise(resolve => setTimeout(resolve, duration));
            
            // Update agent status to active
            if (statusElement) {
                statusElement.className = 'agent-status active';
                statusElement.querySelector('.agent-activity').textContent = 'Task completed successfully';
                
                // Reset to idle after a moment
                setTimeout(() => {
                    statusElement.className = 'agent-status idle';
                    statusElement.querySelector('.agent-activity').textContent = getIdleMessage(agentType);
                }, 2000);
            }
        }
        
        function updateVisualization(agentType) {
            // Reset all nodes
            document.querySelectorAll('.agent-node').forEach(node => {
                node.classList.remove('active');
            });
            
            // Activate current agent
            const agentMap = {
                'triage': 'agent1',
                'hardware': 'agent2',
                'software': 'agent2', 
                'research': 'agent2',
                'analysis': 'agent2',
                'human': 'agent3'
            };
            
            const nodeId = agentMap[agentType];
            if (nodeId) {
                document.getElementById(nodeId).classList.add('active');
            }
        }
        
        function getIdleMessage(agentType) {
            const messages = {
                'triage': 'Ready to analyze requests',
                'hardware': 'Standby for hardware issues',
                'software': 'Standby for software issues', 
                'research': 'Ready for research tasks',
                'analysis': 'Ready for data analysis',
                'human': 'Available for escalation'
            };
            return messages[agentType] || 'Ready to assist';
        }
        
        function addMessage(type, sender, content) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            let messageClass = 'message ';
            if (type === 'user') {
                messageClass += 'user-message';
            } else if (type === 'escalation') {
                messageClass += 'escalation-message';
            } else if (type === 'system') {
                messageClass += 'system-message';
            } else {
                messageClass += 'agent-message';
            }
            
            messageDiv.className = messageClass;
            messageDiv.innerHTML = `
                <div class="message-header">${sender}</div>
                <div class="message-content">${content.replace(/\\n/g, '<br>')}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function updateStats() {
            document.getElementById('messageCount').textContent = messageCount;
            document.getElementById('agentsUsed').textContent = agentsUsed.size;
            document.getElementById('escalationCount').textContent = escalationCount;
            
            if (responseTimes.length > 0) {
                const avgTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;
                document.getElementById('avgResponse').textContent = avgTime.toFixed(1) + 's';
            }
        }
        
        // Initialize
        console.log('ü§ñ Multi-Agent Chat Interface Loaded');
        console.log('üí¨ Try asking about hardware issues, software problems, research tasks, or data analysis');
        
        // Focus on input
        document.getElementById('messageInput').focus();
    </script>
</body>
</html>